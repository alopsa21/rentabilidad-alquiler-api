┌──────────────────────────────┐
│ Frontend (React / móvil / PC│
└──────────────┬──────────────┘
               │
               │ POST /rentabilidad
               ▼
┌──────────────────────────────┐
│ Fastify Server               │
│ (src/server.ts)             │
└──────────────┬──────────────┘
               │
               │ valida body automáticamente
               ▼
┌──────────────────────────────┐
│ Zod Schema                   │
│ motorInput.schema.ts        │
└──────────────┬──────────────┘
               │
        (si falla → errorHandler → 400)
               │
               ▼
┌──────────────────────────────┐
│ Route Handler                │
│ routes/rentabilidad.ts      │
└──────────────┬──────────────┘
               │
               │ input ya validado
               ▼
┌──────────────────────────────┐
│ Motor financiero             │
│ rentabilidad-alquiler-engine│
│ calcularRentabilidad()      │
└──────────────┬──────────────┘
               │
               │ devuelve MotorOutput (Decimal)
               ▼
┌──────────────────────────────┐
│ Serialización                │
│ services/serializacion.ts   │
└──────────────┬──────────────┘
               │
               │ Decimal → string
               ▼
┌──────────────────────────────┐
│ Respuesta JSON               │
└──────────────┬──────────────┘
               │
               ▼
┌──────────────────────────────┐
│ Frontend recibe resultado   │
│ y pinta tarjetas / veredicto│
└──────────────────────────────┘

